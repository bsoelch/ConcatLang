primes :

range #include
valueIO #include
stack #include
codeblocks #include
core #import

##prints all primes bellow the given number, using filtered ranges
printPrimes proc( int => ){
  nMax =::
  nMax 2 < if{
    return
  }
  128 buildString 2 <<i ", " <<* buff =::
  ##primes > 2
  3 nMax [n:m] lambda( int ){ 2 % 0 != } filter for{ k =::
    buff k <<i ", " <<* buff =
    lambda( int ){ k % 0 != } filter ##filter out all multiples of k
  } drop
  buff '\n' << build puts
}

100 printPrimes