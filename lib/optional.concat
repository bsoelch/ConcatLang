core #module
stringIO #include

bool var 2 tuple type optional =$

false false optional new optional optional_empty =$

wrap proc ## value -> optional
  var value =:
  true value optional new
end

?? proc ## optional -> optional bool
  optional val =:
  val
  val 0 []
end

unwrap proc ## optional -> value
  optional val =:
  if val 0 [] :
    val 1 []
  else
    "No value in optional\n" eputs
    1 exit
  end
end

#end ## core
